[toc]

### 7. 接口



#### 定义

接口代表一种调用契约，是多个方法声明的集合。

在某些动态语言里，接口（ interface ）也被称作协议。准备交互的双方，共同遵守事先约定的规则，使得在无需知道对方身份的情况下进行协作。接口要实现的是做什么，而不关心怎么做，谁来做。

接口除了类型依赖，有助于减少用户可视化方法，屏蔽内部结构和实现细节。似乎好处很多，但并不意味着可以滥用接口，毕竟接口运行机制会有运行期开销。对于相同包，或者不会频繁变化的内部模块之间，并不需要抽象出接口来强行分离。接口最常见的使用场景，是对包外提供访问，或预留扩展空间。

Go 接口实现机制很简洁，只要目标类型方法集内包含接口声明的全部方法，就被视为实现了该接口，无须做显示声明。当然，目标类型可实现多个接口。

换句话说，我们可以先实现类型，而后再抽象出所需接口。这种非侵入式设计有很多好处。举例来说：在项目前期就设计出最合理的接口并不容易，而在代码重构，模块分拆时再分离出接口，用以解耦就很常见。另外，再使用第三方库时，抽象出所需接口，即可屏蔽太多并不需要关注的内容，也便于日后更换。

从内部实现来看，接口自身也是一种结构类型，只是编译器会对其做出很多限制。





#### 执行机制





#### 类型转换





#### 技巧



